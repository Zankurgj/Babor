<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="utf-8" />
    <title>Babor</title>
    <meta name="viewport" content="width=device-width" />
    <!-- <link rel="icon" href="img/favicon.png" /> -->
    <!-- <meta property="og:image" content="img/dest/preview.jpg" /> -->
    <link rel="stylesheet" href="css/app.min.css" />
  </head>
  <style>
    #canvas {
      display: block;
      margin: 0 auto;
      margin-top: 100px;
    }
  </style>
  <body>
    <canvas id="canvas" width="1080" height="1080">
      Canvas not supported, use another browser.
    </canvas>
    <div>
      <button onclick="startSpin(this)">Крутить колесо</button>
      <div>
        <span>Ваш выигрыш:</span>
        <span id="prizeText"></span>
      </div>
    </div>
    <script src="js/app.min.js"></script>
    <script>
      // let theWheel = new Winwheel({
      //   drawMode: 'image',
      //   imageOverlay: true,
      //   numSegments: 6,
      //   outerRadius: 190,
      //   textFontSize: 18,
      //   textFillStyle: '#fff',
      //   textFontWeight: 'normal',
      //   textFontFamily: 'Arial',
      //   segments: [
      //     {
      //       fillStyle: '#40444d',
      //       text: '-10% на уходы',
      //     },
      //     {
      //       fillStyle: '#fff',
      //       textFillStyle: '#40444d',
      //       text: 'Экспресс-уход',
      //     },
      //     { fillStyle: '#40444d', text: 'Подарок' },
      //     { fillStyle: '#fff', textFillStyle: '#40444d', text: 'Диагностика' },
      //     { fillStyle: '#40444d', text: '-15% на уход' },
      //     {
      //       fillStyle: '#fff',
      //       textFillStyle: '#40444d',
      //       text: 'СПА-уход для рук',
      //     },
      //   ],
      //   animation: {
      //     type: 'spinToStop',
      //     duration: 3,
      //     spins: 3,
      //     callbackFinished: 'alertPrize()',
      //     callbackAfter: 'drawTriangle()',
      //   },
      // });
      let theWheel = new Winwheel({
        drawMode: 'image', // drawMode must be set to image.
        outerRadius: 486,
        responsive: true,
        numSegments: 6, // The number of segments must be specified.
        imageOverlay: true, // Set imageOverlay to true to display the overlay.
        lineWidth: 4, // Overlay uses wheel line width and stroke style so can set these
        strokeStyle: 'red', // as desired to change appearance of the overlay.
        animation: {
          type: 'spinToStop',
          duration: 3,
          spins: 3,
          callbackFinished: 'alertPrize()',
        },
      });

      // Create new image object in memory.
      let firstImg = new Image();

      // Create callback to execute once the image has finished loading.
      firstImg.onload = function () {
        theWheel.wheelImage = firstImg; // Make wheelImage equal the loaded image object.
        theWheel.draw(); // Also call draw function to render the wheel.
      };

      // Set the image source, once complete this will trigger the onLoad callback (above).
      firstImg.src = 'first_image.png';
      firstImg.src = './images/dest/spinning.png';

      function alertPrize() {
        let winningSegment = theWheel.getIndicatedSegment();
        document.querySelector('#prizeText').innerHTML = winningSegment.text;
      }

      // drawTriangle();

      // function drawTriangle() {
      //   let ctx = theWheel.ctx;
      //   ctx.strokeStyle = '#db2d5e';
      //   ctx.fillStyle = '#db2d5e'; // Set fill colour.
      //   ctx.lineWidth = 2;
      //   ctx.beginPath(); // Begin path.
      //   ctx.moveTo(170, 5); // Move to initial position.
      //   ctx.lineTo(230, 5); // Draw lines to make the shape.
      //   ctx.lineTo(200, 40);
      //   ctx.lineTo(171, 5);
      //   ctx.stroke(); // Complete the path by stroking (draw lines).
      //   ctx.fill(); // Then fill.
      // }
      function startSpin(el) {
        el.disabled = true;
        theWheel.startAnimation();
      }
    </script>
  </body>
</html>
