<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="utf-8" />
    <title>Babor</title>
    <meta name="viewport" content="width=device-width" />
    <!-- <link rel="icon" href="img/favicon.png" /> -->
    <!-- <meta property="og:image" content="img/dest/preview.jpg" /> -->
    <link rel="stylesheet" href="css/app.min.css" />
  </head>
  <body>
    <div class="page--whell">
      <div class="wheel-wrapper">
        <canvas
          id="wheelCanvas"
          width="1000"
          height="1000"
          data-responsiveMinWidth="320"
          data-responsiveScaleHeight="true"
        >
          Canvas not supported, use another browser.
        </canvas>
        <div class="wheel-pin-wrapper">
          <div class="wheel-pin">
            <img
              class="wheel-pin-img"
              src="./images/dest/pin.png"
              aria-hidden="true"
              alt="pin"
            />
          </div>
        </div>
      </div>
      <div class="whell-btn">
        <button onclick="startSpin(this)">Крутить колесо</button>
        <div>
          <span>Ваш выигрыш:</span>
          <span id="prizeText"></span>
        </div>
      </div>
    </div>
    <script src="js/app.min.js"></script>
    <script>
      let theWheel = new Winwheel({
        drawMode: 'image', // drawMode must be set to image.
        canvasId: 'wheelCanvas',
        responsive: true,
        numSegments: 6, // The number of segments must be specified.

        strokeStyle: 'transparent', // as desired to change appearance of the overlay.
        segments: [
          {
            text: 'Маникюр',
          },
          {
            text: 'Диагностика кожи',
          },
          { text: 'Подарок' },
          { text: '-7% на уход' },
          {
            text: '-10% на уход',
          },
          {
            text: 'Экспресс уход',
          },
        ],
        animation: {
          type: 'spinToStop',
          duration: 3,
          spins: 3,
          callbackFinished: 'alertPrize()',
        },
      });

      let bgImg = new Image();

      bgImg.onload = function () {
        theWheel.wheelImage = bgImg; // Make wheelImage equal the loaded image object.
        theWheel.draw(); // Also call draw function to render the wheel.
      };

      bgImg.src = './images/dest/spinning.png';

      function alertPrize() {
        let winningSegment = theWheel.getIndicatedSegment();
        document.querySelector('#prizeText').innerHTML = winningSegment.text;
      }

      function startSpin(el) {
        el.disabled = true;
        theWheel.startAnimation();
      }
    </script>
  </body>
</html>
